@page "/"
<link rel="stylesheet" href="Styles/HomePage.css">

<body>

  <!-- ESCOLHA DE LOCAL -->
  <div class="form-flex-container">
    <div class="Container Dropdown  @(abrirDropdownLocal ? "open" : "")">
      <button class="dropdown-button" type="button" @onclick="ToggleDropdownLocal">
        @(!string.IsNullOrEmpty(local) ? local : "Local")
      </button>

      @if (abrirDropdownLocal)
      {
        <ul class="zindexma">
          @foreach (var item in cidades)
          {
            <li>
              <a href="#" @onclick="() => SelecionarLocal(item)">@item</a>
            </li>
          }
        </ul>
      }
    </div>
    <!--ESCOLHA DE HORARIO DISPONIVEL-->
    <div class=" EscolheHorario">
      <input type="time" id="horario" name="horario">
    </div>
    <!-- ESCOLHA DE SERVICO -->
    <div class="Container Dropdown zindexme @(abrirDropdownServico ? "open" : "")">
      <button class="dropdown-button" type="button" @onclick="ToggleDropdownServico">
        @(!string.IsNullOrEmpty(servico) ? servico : "Serviço")
      </button>

      @if (abrirDropdownServico)
      {
        <ul class="zindexme">
          @foreach (var item in servicos)
          {
            <li>
              <a href="#" @onclick="() => SelecionarServico(item)">@item</a>
            </li>
          }
        </ul>
      }
    </div>
  </div>
  <div class="listagem">
    <!-- LISTAGEM DE SERVIÇOS -->
    @foreach (var c in Usuario.Usuarios)
    {
      if (c.cidade == local && c.servico == servico)
      {
        <div class="Card" type="Button">
          <div class="CardContainer">
            <img src="@c.imagemUrl" alt="imagem">
            <div class="Card-Content">
              <div class="Card-Endereco">3 horarios livres</div>
              <div class="Card-NomeUsuario">@c.nome</div>
              <div class="Card-Frase">"@c.frase"</div>
              @* <div class="Card-Horarios">3 horários livres</div> *@
            </div>
          </div>
        </div>
      }
    }
  </div>


  @code {
    private List<string> cidades = new List<string>
    {
    "Tietê",
    "Cerquilho",
    "Boituva",
    "Tatuí",
    "Rafard",
    "Capivari",
    "Porto Feliz"
    };

    private List<string> servicos = new List<string>
    {
    "Cabelereiro/Barbeiro",
    "Lava Autos",
    "Manicure/Pedicure",
    "Hospedagem",
    "Psicologo",
    "Massagem"
    };

    private bool abrirDropdownServico = false;

    private void ToggleDropdownServico()
    {
      abrirDropdownServico = !abrirDropdownServico;
    }

    private void SelecionarServico(string escolha)
    {
      servico = escolha;
      abrirDropdownServico = false;
    }

    private bool abrirDropdownLocal = false;

    private void ToggleDropdownLocal()
    {
      abrirDropdownLocal = !abrirDropdownLocal;
    }

    private string local = "";

    private void SelecionarLocal(string escolha)
    {
      local = escolha;
      abrirDropdownLocal = false;
    }

    private string servico = "";

    class Usuario
    {
      public string nome;
      public string servico;
      public string cidade;
      public string frase;
      public string endereco;
      public string imagemUrl;
      public string link;

      public Usuario(string nome, string servico, string cidade, string frase, string endereco, string imagemUrl, string
      link)
      {
        this.nome = nome;
        this.servico = servico;
        this.cidade = cidade;
        this.frase = frase;
        this.endereco = endereco;
        this.imagemUrl = imagemUrl;
        this.link = link;
      }

      public static List<Usuario> Usuarios = new List<Usuario>();
    }
    protected override void OnInitialized()
    {
      Usuario.Usuarios.Add(new Usuario(
      "Carlos Henrique",
      "Cabelereiro/Barbeiro",
      "Cerquilho",
      "Transformando estilo com cada corte.",
      "Rua das Flores, 123",
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIP4WsCZ045tVPeV6OjJqjVMH1MIBSgOYU2A&s",
      "https://example.com/perfil-carlos"
      ));

      Usuario.Usuarios.Add(new Usuario(
      "Juliana Martins",
      "Lava Autos",
      "Boituva",
      "Seu carro limpo e reluzente em minutos!",
      "Av. das Garagens, 98",
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIP4WsCZ045tVPeV6OjJqjVMH1MIBSgOYU2A&s",
      "https://example.com/perfil-juliana"
      ));

      Usuario.Usuarios.Add(new Usuario(
      "Amanda Souza",
      "Manicure/Pedicure",
      "Tietê",
      "Estilo e cuidado na ponta dos dedos.",
      "Rua das Unhas, 45",
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIP4WsCZ045tVPeV6OjJqjVMH1MIBSgOYU2A&s",
      "https://example.com/perfil-amanda"
      ));

      Usuario.Usuarios.Add(new Usuario(
      "Eduardo Lima",
      "Hospedagem",
      "Capivari",
      "Conforto e tranquilidade no seu descanso.",
      "Av. das Palmeiras, 111",
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIP4WsCZ045tVPeV6OjJqjVMH1MIBSgOYU2A&s",
      "https://example.com/perfil-eduardo"
      ));

      Usuario.Usuarios.Add(new Usuario(
      "Renata Oliveira",
      "Psicologo",
      "Rafard",
      "Escuta e apoio para sua saúde emocional.",
      "Rua da Esperança, 87",
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIP4WsCZ045tVPeV6OjJqjVMH1MIBSgOYU2A&s",
      "https://example.com/perfil-renata"
      ));

      Usuario.Usuarios.Add(new Usuario(
      "Felipe Silva",
      "Massagem",
      "Tatuí",
      "Relaxamento completo com técnicas eficazes.",
      "Av. do Bem-Estar, 222",
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIP4WsCZ045tVPeV6OjJqjVMH1MIBSgOYU2A&s",
      "https://example.com/perfil-felipe"
      ));
    }
  }
</body>
